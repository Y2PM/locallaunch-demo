---
import BaseLayout from '../../layouts/BaseLayout.astro';

const baseRoot = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;
const thanksPath = `${baseRoot}thanks/`;
---
<BaseLayout title="Nonna's Italian Kitchen Demo | LocalLaunch" description="Demo Italian takeaway website with menu highlights, opening hours, and online order form." path="/takeaway/">
  <section class="section italian-hero">
    <h1>Nonna's Italian Kitchen</h1>
    <p class="muted">Authentic Italian takeaway in Leeds — fresh pasta, stone-baked pizza, and family recipes.</p>
    <p class="hero-note">Hand-stretched dough • slow-cooked sauces • family recipes from Emilia-Romagna</p>
  </section>

  <section class="section">
    <h2>Chef's favourites</h2>
    <div class="grid cols-3">
      <article class="menu-card">
        <img src="https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?auto=format&fit=crop&w=900&q=80" alt="Spaghetti bolognese in a bowl" loading="lazy" />
        <h3>Spaghetti Bolognese</h3>
        <p class="muted">Slow-cooked beef ragù, basil, and fresh parmesan.</p>
        <p><strong>£12.50</strong></p>
      </article>
      <article class="menu-card">
        <img src="https://images.unsplash.com/photo-1604382354936-07c5d9983bd3?auto=format&fit=crop&w=900&q=80" alt="Freshly baked margherita pizza" loading="lazy" />
        <h3>Margherita Pizza</h3>
        <p class="muted">San Marzano tomato, fior di latte mozzarella, basil oil.</p>
        <p><strong>£11.50</strong></p>
      </article>
      <article class="menu-card">
        <img src="https://images.unsplash.com/photo-1619895092538-128341789043?auto=format&fit=crop&w=900&q=80" alt="Creamy mushroom risotto" loading="lazy" />
        <h3>Mushroom Risotto</h3>
        <p class="muted">Arborio rice, roasted chestnut mushrooms, truffle butter.</p>
        <p><strong>£13.20</strong></p>
      </article>
    </div>
  </section>

  <section class="section opening-hours">
    <h2>Opening hours</h2>
    <div class="hour-row"><span>Mon–Thu</span><strong>16:30–22:00</strong></div>
    <div class="hour-row"><span>Fri–Sun</span><strong>12:00–22:30</strong></div>
    <p class="muted">Delivery within 4 miles of Leeds city centre. Collection ready in 20–30 minutes.</p>
  </section>

  <section class="section">
    <h2>Place your order</h2>
    <form method="POST" data-netlify="true" name="takeaway-form" action={thanksPath}>
      <input type="hidden" name="form-name" value="takeaway-form" />

      <label for="name">Full name
        <input id="name" name="name" type="text" required />
      </label>
      <label for="phone">Phone
        <input id="phone" name="phone" type="tel" required />
      </label>
      <label for="dish">Choose your dish
        <select id="dish" name="dish" required>
          <option value="">Select a dish</option>
          <option value="spaghetti-bolognese">Spaghetti Bolognese (£12.50)</option>
          <option value="margherita-pizza">Margherita Pizza (£11.50)</option>
          <option value="mushroom-risotto">Mushroom Risotto (£13.20)</option>
        </select>
      </label>

      <fieldset id="spaghetti-options" class="dish-options" hidden>
        <legend>Spaghetti options</legend>
        <label><input type="checkbox" name="parmesan" value="yes" /> Add extra parmesan (+£1.00)</label>
        <label><input type="checkbox" name="garlic-bread" value="yes" /> Add garlic bread (+£3.00)</label>
      </fieldset>

      <fieldset id="pizza-options" class="dish-options" hidden>
        <legend>Margherita options</legend>
        <label><input type="checkbox" name="extra-mozzarella" value="yes" /> Extra mozzarella (+£1.50)</label>
        <label><input type="checkbox" name="chilli-oil" value="yes" /> Chilli oil drizzle</label>
      </fieldset>

      <fieldset id="risotto-options" class="dish-options" hidden>
        <legend>Risotto options</legend>
        <label><input type="checkbox" name="parmesan-crisp" value="yes" /> Parmesan crisp topping (+£1.20)</label>
        <label><input type="checkbox" name="gluten-free" value="yes" /> Gluten-free preparation</label>
      </fieldset>

      <label for="address">Delivery address
        <textarea id="address" name="address" rows="3" required></textarea>
      </label>
      <label for="postcode">Postcode
        <input id="postcode" name="postcode" type="text" required />
      </label>
      <label for="notes">Order notes
        <textarea id="notes" name="notes" rows="4" placeholder="Door code, allergy info, preferred delivery time..."></textarea>
      </label>

      <button class="btn" type="submit">Submit order</button>
    </form>
  </section>
</BaseLayout>

<script is:inline>
  const dishSelect = document.querySelector('#dish');
  const sections = {
    'spaghetti-bolognese': document.querySelector('#spaghetti-options'),
    'margherita-pizza': document.querySelector('#pizza-options'),
    'mushroom-risotto': document.querySelector('#risotto-options')
  };

  const updateDishOptions = () => {
    Object.values(sections).forEach((section) => {
      if (section) section.hidden = true;
    });

    const selectedSection = sections[dishSelect?.value];
    if (selectedSection) selectedSection.hidden = false;
  };

  if (dishSelect) {
    dishSelect.addEventListener('change', updateDishOptions);
    updateDishOptions();
  }
</script>

<style>
  .menu-card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 12px;
    margin-bottom: 0.8rem;
  }

  fieldset {
    border: 1px solid var(--border);
    border-radius: 10px;
    margin: 0.8rem 0;
    padding: 0.8rem;
  }

  legend {
    padding: 0 0.4rem;
    font-weight: 700;
  }

  .dish-options label {
    margin: 0.35rem 0;
    font-weight: 500;
  }

  .dish-options input[type='checkbox'] {
    width: auto;
    margin-right: 0.4rem;
  }
  .italian-hero {
    background: linear-gradient(120deg, #3e1f1f 0%, #61292b 45%, #1f6b3a 100%);
    border-color: #8e5858;
  }

  .hero-note {
    margin-top: 0.8rem;
    font-weight: 600;
    color: #ffe9c2;
  }

  .menu-card {
    border: 1px solid rgba(255, 210, 129, 0.35);
    border-radius: 12px;
    padding: 0.8rem;
    background: linear-gradient(180deg, rgba(255, 210, 129, 0.12), transparent 70%);
  }

  .opening-hours {
    border-left: 4px solid #d4a84f;
  }

  .hour-row {
    display: flex;
    justify-content: space-between;
    border-bottom: 1px dashed rgba(212, 168, 79, 0.4);
    padding: 0.35rem 0;
    font-size: 1.02rem;
  }

</style>
